(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{1380:function(e,t,r){Promise.resolve().then(r.bind(r,5168))},5756:function(e,t,r){"use strict";function n(e){return 1===(e=String(e)).length?"0"+e:e}r.d(t,{W6:function(){return o},eR:function(){return i},f1:function(){return n}});let s=["January","February","March","April","May","June","July","August","September","October","November","December"],a=e=>s[e],l=e=>e>10&&e<20?"th":["th","st","nd","rd","th","th","th","th","th","th"][e%10],c=e=>e+l(e),i=()=>{let e=new Date;return Number("".concat(e.getFullYear()).concat(n(e.getMonth())).concat(n(e.getDate())).concat(n(e.getHours())).concat(n(e.getMinutes())).concat(n(e.getSeconds())))},o=()=>{let e=new Date;return"".concat(c(e.getDate())," ").concat(a(e.getMonth()),", ").concat(e.getFullYear())}},7105:function(e,t,r){"use strict";r.d(t,{I:function(){return c},db:function(){return i}});var n=r(994),s=r(4086),a=r(3085);let l=(0,n.ZF)({apiKey:"AIzaSyB-n-QZ2J_GpHeqhn6uz-TSQAldkvi0lUM",authDomain:"cla-stories.firebaseapp.com",projectId:"cla-stories",storageBucket:"cla-stories.appspot.com",messagingSenderId:"263250403554",appId:"1:263250403554:web:92eba0e0d4ed44941efebb",measurementId:"G-6QJJW9GSGK"}),c=(0,a.v0)(l),i=(0,s.ad)(l)},5168:function(e,t,r){"use strict";r.r(t),r.d(t,{PostView:function(){return h}});var n=r(7437),s=r(7105),a=r(4086),l=r(2265),c=r(9150),i=r(5756);function o(e){let{id:t,setDocComments:r}=e,[c,o]=(0,l.useState)(""),u=async()=>{if(!s.I.currentUser||!s.I.currentUser.email){localStorage.setItem("loginredirect",window.location.href),window.open("/login","_self");return}try{var e;let n=null!==(e=s.I.currentUser.displayName)&&void 0!==e?e:s.I.currentUser.email,l={username:n,comment:c,date:(0,i.W6)(),dateMaths:(0,i.eR)()};await (0,a.r7)((0,a.JU)(s.db,"posts",t),{comments:(0,a.vr)(l)}),r(e=>[...e,l]),o("")}catch(e){}};return(0,n.jsxs)("div",{className:"rounded-md px-6 py-6 mb-4 text-black text-right flex",style:{backgroundColor:0===c.length?"transparent":"#e4e4e4"},children:[(0,n.jsx)("textarea",{placeholder:"Comment your thoughts...",className:"resize-none w-full inline-block outline-none pl-6 font-playfair mr-1 bg-transparent",value:c,rows:3,onChange:e=>o(e.target.value.slice(0,300))}),(0,n.jsx)("br",{}),(0,n.jsx)("button",{className:"disabled:text-gray-500 disabled:bg-gray-200 bg-white hover:bg-black hover:text-white text-black rounded-sm py-[5px] px-[10px] self-end transition-all",disabled:""===c.trim(),onClick:u,children:"Send!"})]})}function u(e){let{comment:t,username:r,date:s}=e,[a,c]=(0,l.useState)(!1);return console.log(s,new Date(s)),(0,n.jsxs)("div",{className:"rounded-sm px-6 py-6 text-black",children:[(0,n.jsx)("span",{className:"text-black font-playfair",children:r}),(0,n.jsx)("span",{className:"mx-2 text-purple-800",children:"•"}),(0,n.jsx)("span",{className:"text-purple-800 text-[10px]",children:s.toLocaleUpperCase()}),(0,n.jsx)("br",{}),(0,n.jsxs)("span",{className:"inline-block pl-6 text-black text-sm",children:[a||t.length<=100?t:t.slice(0,100)+"..."," ",t.length>100&&(0,n.jsx)("a",{className:"cursor-pointer text-cyan-600",onClick:()=>c(e=>!e),children:a?"show less":"show more"})]})]})}function d(e){let{docComments:t,id:r,setDocComments:s}=e;return(0,n.jsxs)("div",{className:"px-6 sm:px-28 md:px-40 lg:px-56 pt-12 pb-40 overflow-auto",children:[(0,n.jsx)(o,{id:r,setDocComments:s}),t.sort((e,t)=>t.dateMaths-e.dateMaths).map((e,t)=>(0,l.createElement)(u,{...e,key:e.comment+e.username+t}))]})}function m(e){let{docLikes:t,id:r,setDocLikes:l}=e,i=async()=>{if(!s.I.currentUser||null===s.I.currentUser.email){window.open("/login","_self");return}if(t.includes(s.I.currentUser.email)){try{await (0,a.r7)((0,a.JU)(s.db,"users",s.I.currentUser.email),{likedPosts:(0,a.Ab)(r)}),await (0,a.r7)((0,a.JU)(s.db,"posts",r),{likedBy:(0,a.Ab)(s.I.currentUser.email)}),l(e=>e.filter(e=>{var t;return e!==(null===(t=s.I.currentUser)||void 0===t?void 0:t.email)}))}catch(e){}return}try{await (0,a.r7)((0,a.JU)(s.db,"users",s.I.currentUser.email),{likedPosts:(0,a.vr)(r)}),await (0,a.r7)((0,a.JU)(s.db,"posts",r),{likedBy:(0,a.vr)(s.I.currentUser.email)}),l(e=>[...e.filter(e=>{var t;return e!==(null===(t=s.I.currentUser)||void 0===t?void 0:t.email)}),s.I.currentUser.email])}catch(e){}};return(0,n.jsxs)("p",{className:"text-cyan-500 text-right text-md cursor-pointer absolute bottom-20    right-12 xs:right-16 sm:right-28 md:right-40 lg:right-56",children:[(0,n.jsx)(e=>{let{onClick:r}=e;return s.I.currentUser&&s.I.currentUser.email&&t.includes(s.I.currentUser.email)?(0,n.jsx)(c.L7p,{className:"inline-block",onClick:r}):(0,n.jsx)(c.DZs,{className:"inline-block",onClick:r})},{onClick:i}),t.length]})}function p(e){let{text:t}=e;return(0,n.jsx)("p",{className:"text-black inline-block my-4 whitespace-pre-line pb-6 font-playfair tracking-wide  leading-7",children:t.split("\\n").map((e,t)=>(0,n.jsxs)("span",{children:[e,(0,n.jsx)("br",{})]},t))})}function h(e){let{id:t}=e,[r,i]=(0,l.useState)(""),[o,u]=(0,l.useState)(""),[h,x]=(0,l.useState)(0),[f,b]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[v,w]=(0,l.useState)(""),[k,j]=(0,l.useState)("");return(0,l.useEffect)(()=>{(async()=>{await (0,a.r7)((0,a.JU)(s.db,"posts",t),{views:(0,a.nP)(1)})})().then(()=>x(e=>e+1)).catch()},[]),(0,l.useEffect)(()=>{(async()=>{let e=(0,a.JU)(s.db,"posts",t),r=await (0,a.QT)(e);if(!r.exists()){i("404 Error! This page doesn't exist!"),u("It seems that the page you are trying to access doesn't exist :(");return}let n=r.data();i(n.title),u(n.text),x(n.views),w(n.datePostedDisplay),b(n.likedBy),y(n.comments),j(n.bgImage)})().then().catch()},[]),(0,n.jsxs)("section",{className:"pt-12",children:[(0,n.jsx)("div",{className:"w-full h-[30vh] bg-cover bg-fixed",style:{backgroundImage:"url('".concat(k,"')")}}),(0,n.jsxs)("div",{className:"px-12 sm:px-28 md:px-40 lg:px-56 pt-12 pb-40 overflow-auto min-h-[calc(100vh-3rem)] relative bg-white",children:[(0,n.jsx)("h1",{className:"text-2xl font-playfair text-black",children:r}),(0,n.jsxs)("p",{className:"text-sm text-purple-800 my-2",children:["POSTED ON ",v.toLocaleUpperCase()," • ",(0,n.jsx)(c.Zju,{className:"inline-block"}),h," • ",(0,n.jsx)(c.RG4,{className:"inline-block"}),g.length," "]}),(0,n.jsx)(p,{text:o}),(0,n.jsx)(m,{docLikes:f,setDocLikes:b,id:t})]}),(0,n.jsx)("div",{className:"w-full h-[30vh] bg-cover bg-fixed",style:{backgroundImage:"url('".concat(k,"')")}}),(0,n.jsx)(d,{docComments:g,id:t,setDocComments:y})]})}},1172:function(e,t,r){"use strict";r.d(t,{w_:function(){return i}});var n=r(2265),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=n.createContext&&n.createContext(s),l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)0>t.indexOf(n[s])&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};function i(e){return function(t){return n.createElement(o,l({attr:l({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return n.createElement(t.tag,l({key:r},t.attr),e(t.child))})}(e.child))}}function o(e){var t=function(t){var r,s=e.attr,a=e.size,i=e.title,o=c(e,["attr","size","title"]),u=a||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,o,{className:r,style:l(l({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&n.createElement("title",null,i),e.children)};return void 0!==a?n.createElement(a.Consumer,null,function(e){return t(e)}):t(s)}}},function(e){e.O(0,[358,214,712,647,971,596,744],function(){return e(e.s=1380)}),_N_E=e.O()}]);